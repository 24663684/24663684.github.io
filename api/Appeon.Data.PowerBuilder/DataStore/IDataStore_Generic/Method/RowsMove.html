<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>IDataStore.RowsMove(int startrow, int endrow, DwBuffer movebuffer, IDataStore targetdw, int beforerow, DwBuffer targetbuffer) Method </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="IDataStore.RowsMove(int startrow, int endrow, DwBuffer movebuffer, IDataStore targetdw, int beforerow, DwBuffer targetbuffer) Method ">
    <meta name="generator" content="docfx 2.37.0.0">
    
    <link rel="shortcut icon" href="../../../../../images/logo-appeon.png ">
    <link rel="stylesheet" href="../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../../index.html">
        	<img id="logo" src="../../../../../images/logo-appeon.png" height="20" width="164.45" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="idatastorerowsmoveint-startrow-int-endrow-dwbuffer-movebuffer-idatastore-targetdw-int-beforerow-dwbuffer-targetbuffer-method"><strong>IDataStore.RowsMove(int startrow, int endrow, DwBuffer movebuffer, IDataStore targetdw, int beforerow, DwBuffer targetbuffer) Method</strong></h2>

<p><strong>.NET Standard 2.x |</strong>  <a href="javascript:void(0)" class="dropdown">Current Version(0.5.0-alpha) <img src="../../../../../images/dropdown.png"></a></p>
<div class="otherversions" value="versdiv">
<p><a href="javascript:void(0)">0.5.0-alpha</a></p>
<p><a href="javascript:void(0)">0.5.1-alpha(current)</a></p>
</div>
<p>清除一个DataStore中的一系列行，并将它们插入另一个DataStore中。 或者，<code>RowsMove</code>在一个DataStore中将行从一个缓冲区移动到另一个缓冲区。</p>
<p>Clears a range of rows from one DataStore and inserts them in another. Alternatively, <code>RowsMove</code> can move rows from one buffer to another within a single DataStore.</p>
<p><strong>Namespace:</strong> Appeon.Data.PowerBuilder</p>
<p><strong>Assembly:</strong> Appeon.Data.PowerBuilder.dll</p>
<h3 id="syntax"><strong>Syntax</strong></h3>
<pre><code class="lang-c#">  public bool RowsMove(int startrow, int endrow, DwBuffer movebuffer, IDataStore targetdw, int beforerow, DwBuffer targetbuffer);
</code></pre>
<p><strong>Parameters</strong></p>
<p><code>startrow</code>	System.Int32</p>
<p>The zero-based number of the first row you want to move.</p>
<p><code>endrow</code>	System.Int32</p>
<p>The zero-based number of the last row you want to move.</p>
<p><code>movebuffer</code>	 <a href="../../DwBuffer/DwBuffer.html">Appeon.Data.PowerBuilder.DwBuffer</a></p>
<p>A value of the <code>DwBuffer</code> enumerated datatype identifying the DataStore buffer from which you want to move the rows.</p>
<p><code>targetdw</code>	 <a href="../../IDataStore/IDataStore.html">Appeon.Data.PowerBuilder.IDataStore</a></p>
<p>The name of the DataStore to which you want to move the rows. <code>targetdw</code> can be the current DataStore or a different DataStore, but it cannot be a child DataWindow.</p>
<p><code>beforerow</code>	System.Int32</p>
<p>The zero-based number of the row before which you want to insert the moved rows. To insert after the last row, use -1 or use any value that is greater than the number of existing rows.</p>
<p><code>targetbuffer</code>	 <a href="../../DwBuffer/DwBuffer.html">Appeon.Data.PowerBuilder.DwBuffer</a></p>
<p>A value of the <code>DwBuffer</code> enumerated datatype identifying the target buffer into which you want to move the rows.</p>
<p><strong>Returns</strong></p>
<p>System.Boolean</p>
<p>Returns <code>true</code> if it succeeds, and <code>false</code> if <code>startrow</code>,  <code>endrow</code> or <code>beforerow</code> is not correct.</p>
<h3 id="remarks"><strong>Remarks</strong></h3>
<p>使用RowsMove时，行在目标DataStore中的状态为NewModified。如果在单个DataStore中的缓冲区之间移动行，PowerBuilder将保留对行的来源的了解，并相应地更改其状态。例如，如果将未修改的行从主缓冲区移动到删除缓冲区，则会将它们标记为删除。如果将行移回主缓冲区，则其状态将返回NotModified。但是，请注意，如果将行从一个DataStore移动到另一个并再返回，则行的状态为NewModified，因为它们来自不同的DataStore。
使用RowsMove时，不会为目标DataStore中的下拉DataStore自动检索数据，就像调用InsertRow时一样。您必须在目标中为子DataStore显式调用Retrieve。
当您使用RowsCopy或RowsMove填充另一个DataStore时，复制的数据不会由对目标DataStore生效的过滤器或排序条件自动处理。您可能需要调用Filter，GroupCalc或Sort Method来正确处理数据。
RowsMove的用途包括：
1、将几行从主缓冲区移动到删除缓冲区，而不是一次删除一行。
2、将行从删除缓冲区移动到主缓冲区，以在应用程序中实现撤消功能。</p>
<p>When you use RowsMove, the rows have the status <code>ModelState.NewModified</code> in the target DataStore.</p>
<p>If you move rows between buffers in a single DataStore, DataStore retains knowledge of where the rows came from, and changes their status accordingly. For example, if you move unmodified rows from the primary buffer to the delete buffer, they are marked for deletion. If you move the rows back to the primary buffer, their status returns to <code>ModelState.NotModified</code>. Note, however, that if you move rows from one DataStore to another and back again, the row status is <code>ModelState.NewModified</code> because they came from a different DataStore.</p>
<p>When you use <code>RowsMove</code>, data is not automatically retrieved for drop-down DataWindows in the target DataStore, as it is when you call <code>InsertRow</code>. You must explicitly call <code>Retrieve</code> for child DataWindows in the target.</p>
<p>When you use <code>RowsCopy</code> or <code>RowsMove</code> to populate another DataStore, the copied data is not automatically processed by filters or sort criteria in effect on the target DataStore. You might be required to call the <code>Filter</code>, or <code>Sort</code> methods to properly process the data.</p>
<p>Uses for <code>RowsMove</code> include:</p>
<ul>
<li>Moving several rows from the primary buffer to the delete buffer, instead of deleting one at a time</li>
<li>Moving rows from the delete buffer to the primary buffer, to implement an Undo capability in your application</li>
</ul>
<h3 id="examples"><strong>Examples</strong></h3>
<p>演示RowsMove方法, 从datastore中删除第一条数据，然后再从deletebuffer中恢复</p>
<pre><code class="lang-C#">using Appeon.Data.PowerBuilder;
using System;

namespace Appeon.ApiDoc.IDataStoreExamples
{
    public class RowsMoveExample
    {
        private SchoolContext _context;

        public RowsMoveExample(SchoolContext dataContext)
        {
            // Set Data Context
            _context = dataContext;
        }

        public void Example()
        {
            // Instantiate the datastore with datawindow:d_department
            var datastore = new DataStore(&quot;d_department&quot;, _context);
            
            datastore.Retrieve();

            // This datastore has four records
            Console.WriteLine(&quot;Retrieved Rowcount:{0}&quot;, datastore.RowCount);

            datastore.DeleteRow(0);
            
            Console.WriteLine(&quot;After DeleteRow, Primary buffer Rowcount:{0}&quot;,
                               datastore.RowCount);
            
            Console.WriteLine(&quot;After DeleteRow, Deleted buffer Rowcount:{0}&quot;,
                               datastore.DeletedCount);

            // when call RowsMove, moves all the rows in the delete buffer
            // for datastore to the primary buffer for datastore
            datastore.RowsMove(0, datastore.DeletedCount, DwBuffer.Delete,
                               datastore, 0, DwBuffer.Primary);

            Console.WriteLine(&quot;After RowsMove, Primary buffer Rowcount:{0}&quot;,
                               datastore.RowCount);

            Console.WriteLine(&quot;After RowsMove, Deleted buffer Rowcount:{0}&quot;,
                               datastore.DeletedCount);

            /*This code produces the following output:
            
            Retrieved Rowcount:4
            After DeleteRow, Primary buffer Rowcount:3
            After DeleteRow, Deleted buffer Rowcount:1
            After RowsMove, Primary buffer Rowcount:4
            After RowsMove, Deleted buffer Rowcount:0
            */

        }
    }
}
</code></pre>
<h4 id="example-refer-to">Example Refer To</h4>
<p>Model Class: <a href="../../../SourceCode/Examples/ExamplesClient.pbw/examplesclient.pbt/school.pbl/D_Department.html">D_Department</a> <br>DataWindow File: <a href="../../../SourceCode/Examples/ExamplesClient.pbw/examplesclient.pbt/school.pbl/d_department_srd.html">d_department</a> <br></p>
<h3 id="applies-to"><strong>Applies to</strong></h3>
<p>.NET Standard</p>
<p>2.x</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>Appeon</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../styles/main.js"></script>
  </body>
</html>
