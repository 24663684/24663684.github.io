<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ModelMapper &#31867; </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ModelMapper &#31867; ">
    <meta name="generator" content="docfx 2.37.0.0">
    
    <link rel="shortcut icon" href="../../../../images/logo-appeon.png ">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html">
        	<img id="logo" src="../../../../images/logo-appeon.png" height="20" width="164.45" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="modelmapper-类"><strong>ModelMapper 类</strong></h2>

<p><strong>.NET Standard 2.x |</strong>  <a href="javascript:void(0)" class="dropdown">当前版本(0.5.0-alpha) <img src="../../../../images/dropdown.png" class="dropdownpi"></a></p>
<div class="otherversions" value="versdiv">
<a href="javascript:void(0)">0.5.0-alpha</a>
<a href="javascript:void(0)">0.5.1-alpha(current)</a>
</div>
ModelMapper是基于.NET Standard开发的数据操作组件。ModelMapper is a data manipulation
component compliant with .NET Standard.
<p>功能更偏向于业务逻辑的处理。提供简单易用的接口对多表关联、嵌套数据等复杂业务数据的包装处理，使用ModelMapper可以使用更少的代码清晰的处理复杂的业务逻辑。Compared to DataStore and ModelStore, it can handle complicated business logics in a more efficient way with significantly less coding. It can build models with data from multiple tables, support nested levels of relationships, and provide implicit transaction management for business entities (i.e. a top-level object and all of its children).</p>
<p>ModelMapper在保存数据时，自动将已追踪的所有数据库操作纳入事务范围以保证数据完整性。When ModelMapper is used to save data, it can automatically commit all tracked data operations in one transaction to achieve data integrity.</p>
<p><strong>命名空间：</strong> Appeon.Data</p>
<p><strong>程序集：</strong> Appeon.Data.dll</p>
<p><strong>实现接口</strong></p>
<p><a href="../IModelMapper/IModelMapper.html">Appeon.Data.IModelMapper</a></p>
<h3 id="语法"><strong>语法</strong></h3>
<pre><code class="lang-c#"> public class ModelMapper : IModelMapper;
</code></pre>
<h3 id="构造函数"><strong>构造函数</strong></h3>
<table>
<thead>
<tr>
<th></th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Constructor/ModelMapper.html"> ModelMapper(DataContext context)</a></td>
<td>使用数据上下文初始化一个ModelMapper类的新实例。</td>
</tr>
</tbody>
</table>
<h3 id="方法"><strong>方法</strong></h3>
<table>
<thead>
<tr>
<th></th>
<th>名称</th>
<th>返回类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../../../images/method.jpeg" alt="">       </td>
<td><a href="Method/Avg.html">Avg&lt;TModel&gt;(string expression,params object[] parameters)</a></td>
<td>object</td>
<td>查询表达式定义的平均值。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Count.html">Count&lt;TModel&gt;(params object[] parameters)</a></td>
<td>int</td>
<td>统计行数。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/DistinctCount.html">DistinctCount&lt;TModel&gt;(string expression,params object[] parameters)</a></td>
<td>int</td>
<td>统计去除了表达式定义的重复数据的行数。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Exists.html">Exists&lt;TModel&gt;(params object[] parameters)</a></td>
<td>bool</td>
<td>确定是否存在指定条件的元素。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/KeyExists.html">KeyExists&lt;TModel&gt;(params object[] parameters)</a></td>
<td>bool</td>
<td>确定主键是否存在。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Load1.html">Load&lt;TModel&gt;(params object[] parameters)</a></td>
<td><a href="../ILoadable/ILoadable.html">ILoadable&lt;TModel&gt;</a></td>
<td>传入TModel中定义的查询参数查询数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Load2.html">Load&lt;TModel&gt;(ISqlQueryBuilder queryBuilder, params object[] parameters)</a></td>
<td><a href="../ILoadable/ILoadable.html">ILoadable&lt;TModel&gt;</a></td>
<td>根据SqlQueryBuilder的定义查询数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/LoadByKey.html">LoadByKey&lt;TModel&gt;(params object[] parameters)</a></td>
<td><a href="../ILoadable/ILoadable.html">ILoadable&lt;TModel&gt;</a></td>
<td>使用主键作为参数查询数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/LoadEmbedded.html">LoadEmbedded&lt;TModel&gt;(TModel model, params object[] parameters)</a></td>
<td><a href="../IEmbeddedLoadable/IEmbeddedLoadable.html">IEmbeddedLoadable&lt;TModel&gt;</a></td>
<td></td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Max.html">Max&lt;TModel&gt;(string expression, params object[] parameters)</a></td>
<td>object</td>
<td>查询表达式定义的最大值。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Min.html">Min&lt;TModel&gt;(string expression, params object[] parameters)</a></td>
<td>object</td>
<td>查询表达式定义的最小值。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/SaveChanges.html">SaveChanges(bool batchExecute = false)</a></td>
<td><a href="../IDbResult/IDbResult.html">IDbResult</a></td>
<td>把对数据的修改保存到数据库中。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Scalar.html">Scalar&lt;TModel, TValue&gt;(string expression, params object[] parameters)</a></td>
<td>TValue</td>
<td>查询表达式定义的第一行的数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/ScalarByKey.html">ScalarByKey&lt;TModel, TValue&gt;(string expression, params object[] parameters)</a></td>
<td>TValue</td>
<td>根据主键查询表达式定义的第一行的数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Track1.html">Track(Action&lt;ISaveContext&gt; saveAction)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>跟踪Action委托，在数据未被提交到数据库之前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Track2.html">Track&lt;TModel&gt;(IModelEntry&lt;TModel&gt; modelEntry)</a></td>
<td>TModel</td>
<td>跟踪数据的状态，在保存时可以根据数据的状态进行相应的操作。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Track3.html">Track&lt;TModel&gt;(IModelEntry&lt;TModel&gt; modelEntry, Action&lt;ISaveContext&gt; afterSaveAction)</a></td>
<td>TModel</td>
<td>跟踪数据的状态，在保存时可根据数据的状态进行对应的操作，Action委托参数会在Sql命令执行后但未提交前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackCreate1.html">TrackCreate&lt;TModel&gt;(TModel model)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>新增数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackCreate2.html">TrackCreate&lt;TModel&gt;(TModel model, Action&lt;ISaveContext&gt; afterSaveAction)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>新增数据，Action委托参数会在Sql命令执行后但未提交前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackCreateRange.html">TrackCreateRange&lt;TModel&gt;(IEnumerable&lt;TModel&gt; models)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>新增一组数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackDelete1.html">TrackDelete&lt;TModel&gt;(TModel model)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>删除数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackDelete2.html">TrackDelete&lt;TModel&gt;(TModel model, Action&lt;ISaveContext&gt; afterSaveAction)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>删除数据，Action委托参数会在Sql命令执行后但未提交前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackDelete3.html">TrackDelete(ISqlDeleteBuilder deleteBuilder, params object[] parameters)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>使用ISqlDeleteBuilder删除数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackDeleteByKey.html">TrackDeleteByKey&lt;TModel&gt;(params object[] parameters)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>使用主键作为参数删除数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackDeleteRange.html">TrackDeleteRange&lt;TModel&gt;(IEnumerable&lt;TModel&gt; models)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>删除一组数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackInsert.html">TrackInsert(ISqlInsertBuilder insertBuilder, params object[] parameters)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>使用ISqlInsertBuilder插入数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackMaster1.html">TrackMaster&lt;TModel&gt;(IModelEntry&lt;TModel&gt; modelEntry)</a></td>
<td><a href="../IDetailTracker/IDetailTracker.html">IDetailTracker&lt;TModel&gt;</a></td>
<td>跟踪主Model的数据并可以根据在主Model的配置对关联对象进行赋值。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackMaster2.html">TrackMaster&lt;TModel&gt;(IModelEntry&lt;TModel&gt; modelEntry, Action&lt;ISaveContext&gt; afterSaveAction)</a></td>
<td><a href="../IDetailTracker/IDetailTracker.html">IDetailTracker&lt;TModel&gt;</a></td>
<td>跟踪主Model的数据并可以根据在主Model的配置对关联对象进行赋值，Action委托参数会在Sql命令执行后但未提交前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackRange.html">TrackRange&lt;TModel&gt;(IEnumerable&lt;IModelEntry&lt;TModel&gt;&gt; modelEntries)</a></td>
<td>IList&lt;TModel&gt;</td>
<td></td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackSqlCUD.html">TrackSqlCUD(string sqlText, params object[] parameters)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>执行创建，更新，删除Sql语句。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackUpdate1.html">TrackUpdate&lt;TModel&gt;(TModel model)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>更新数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackUpdate2.html">TrackUpdate&lt;TModel&gt;(TModel model, Action&lt;ISaveContext&gt; afterSaveAction)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>更新数据，Action委托参数会在Sql命令执行后但未提交前调用。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackUpdate3.html">TrackUpdate&lt;TModel&gt;(ISqlUpdateBuilder updateBuilder, params object[] parameters)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>使用IsqlUpdateBuilder更新数据。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/TrackUpdateRange.html">TrackUpdateRange&lt;TModel&gt;(IEnumerable&lt;TModel&gt; models)</a></td>
<td><a href="../IModelMapper/IModelMapper.html">IModelMapper</a></td>
<td>更新一组数据</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Validation1.html">Validation()</a></td>
<td>bool</td>
<td>使用ModelMapper中设置的数据较验规则对数据的合法性进行验证。</td>
</tr>
<tr>
<td><img src="../../../../images/method.jpeg" alt=""></td>
<td><a href="Method/Validation2.html">Validation(out DataValidationResult result)</a></td>
<td>bool</td>
<td>使用ModelMapper中设置的数据较验规则对输出的结果数据的合法性进行验证。</td>
</tr>
</tbody>
</table>
<h3 id="remarks"><strong>Remarks</strong></h3>
<table>
<thead>
<tr>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ModelMapper是一个简单易用的数据操作组件，实现了数据库表和c#对象的映射关系，提供了更灵活的数据操作接口，只需要编写简单的代码便能实现对象的关系以及级联操作，程序员几乎可以不编写任何SQL语句就能实现对数据库的操作功能。ModelMapper is an easy-to-use data manipulation component. It maps the database table to the C# objects and provides flexible interfaces for manipulating the database. Developer can easily manage the object relationships and cascading operations with simple coding, and perform various operations to the database via writing almost no SQL statements.</td>
</tr>
<tr>
<td>Tracking</td>
</tr>
<tr>
<td>ModelMapper提供了多种Track方法，当Track方法执行时仅仅记录了待执行的数据库操作，而并未实际执行数据库操作。当调用多个ModelMapper中用于追踪的方法后，追踪的先后顺序决定了IModeMapper.SaveChanges方法在实际执行数据库操作时的先后顺序。当调用IModeMapper.SaveChanges方法实际执行数据库操作时，所有数据库操作将会在同一个一个事务范围内，当后续数据库操作需要依赖于某次前序的数据操作的结果时(比如)，可以利用Track方法提供的Action<isaveaction>参数来灵活添加特殊的逻辑代码，接收和传递保存数据过程中的上下文信息。调用IModeMapper.SaveChanges方法实际执行数据库操作后，所有已追踪的数据库操作将重置。ModelMapper provides various track methods. The track method keeps track of the database operation only, but does not execute the operations. When multiple track methods are called, the order of the tracks determines the order of the database operations to be executed. When the IModeMapper.SaveChanges method is called to actually execute the database operations, all of these operations will be executed in the same transaction. When a succeeding operation relies on the execution result of a proceeding operation, the developer can use the Action<isaveaction> parameter to receive and pass along the context when the data is saved. After the IModeMapper.SaveChanges method executes the database operations, all of the tracked operations will be restored to the initial state.</isaveaction></isaveaction></td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>Appeon</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
